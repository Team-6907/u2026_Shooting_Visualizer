<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Shoot-on-Move Visualizer</title>
    <link rel="icon" type="image/png" href="assets/rebuilt_logo.png" />
    <link rel="shortcut icon" type="image/png" href="assets/rebuilt_logo.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,600&family=IBM+Plex+Mono:wght@500&family=IBM+Plex+Sans:wght@400;600&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="app">
      <div id="canvas-container" tabindex="0">
        <div class="hud">
          <h3>动态射球可视化</h3>
          <div class="keys">
            <kbd>W</kbd><kbd>A</kbd><kbd>S</kbd><kbd>D</kbd> 移动 <kbd>Space</kbd> 停
          </div>
          <div class="hud-legend">
            <span class="legend-aim">─</span> 瞄准
            <span class="legend-virtual">●</span> 虚拟目标
            <span class="legend-impact">●</span> 落点<br />
            <span class="legend-trajectory">⌒</span> 弹道
            <span class="legend-velocity">→</span> 速度
          </div>
        </div>
        <div class="camera-hint">拖拽旋转 · 滚轮缩放 · 点击启用键盘</div>
      </div>

      <aside class="controls-panel">
        <h2>控制</h2>

        <div class="control-group">
          <label>位置 X/Y (m)</label>
          <div class="control-row" data-key="robotX">
            <input type="range" min="0" max="16.54" step="0.01" value="2.0" />
            <input type="number" step="0.01" value="2.0" />
          </div>
          <div class="control-row" data-key="robotY">
            <input type="range" min="0" max="8.07" step="0.01" value="4.035" />
            <input type="number" step="0.01" value="4.035" />
          </div>
        </div>

        <div class="control-group">
          <label>最大速度 (m/s)</label>
          <div class="control-row" data-key="maxLinearSpeed">
            <input type="range" min="0.5" max="6.86" step="0.1" value="2.0" />
            <input type="number" step="0.1" value="2.0" />
          </div>
        </div>

        <div class="control-group">
          <label>最大加速度 (m/s²)</label>
          <div class="control-row" data-key="maxAcceleration">
            <input type="range" min="0.5" max="6.87" step="0.1" value="3.0" />
            <input type="number" step="0.1" value="3.0" />
          </div>
        </div>

        <div class="control-group">
          <label class="toggle">
            <input type="checkbox" id="shootOnMove" checked />
            动态补偿
          </label>
        </div>

        <div class="control-group control-group--section">
          <label class="section-title">⚙️ 机构参数</label>

          <label>Hood 最小角 (°)</label>
          <div class="control-row" data-key="minHoodAngle">
            <input type="range" min="20" max="80" step="1" value="45" />
            <input type="number" step="1" value="45" />
          </div>

          <label>Hood 最大角 (°)</label>
          <div class="control-row" data-key="maxHoodAngle">
            <input type="range" min="50" max="90" step="1" value="90" />
            <input type="number" step="1" value="90" />
          </div>

          <label>最小入射角 (°)</label>
          <div class="control-row" data-key="minEntryAngle">
            <input type="range" min="15" max="60" step="5" value="45" />
            <input type="number" step="5" value="45" />
          </div>

          <label>飞轮最高速 (m/s)</label>
          <div class="control-row" data-key="maxFlywheelSpeed">
            <input type="range" min="10" max="45" step="1" value="25" />
            <input type="number" step="1" value="25" />
          </div>

          <label>发射口偏移 X (m)</label>
          <div class="control-row" data-key="launcherOffsetX">
            <input type="range" min="-1.0" max="1.0" step="0.01" value="-0.53" />
            <input type="number" step="0.01" value="-0.53" />
          </div>

          <label>发射口偏移 Y (m)</label>
          <div class="control-row" data-key="launcherOffsetY">
            <input type="range" min="-1.0" max="1.0" step="0.01" value="0.05" />
            <input type="number" step="0.01" value="0.05" />
          </div>

          <label>发射口高度 Z (m)</label>
          <div class="control-row" data-key="launcherOffsetZ">
            <input type="range" min="0.0" max="1.5" step="0.01" value="0.53" />
            <input type="number" step="0.01" value="0.53" />
          </div>
        </div>

        <div class="control-group">
          <label class="section-title section-title--target">🎯 目标射击点 (m)</label>

          <label>目标 X</label>
          <div class="control-row" data-key="targetX">
            <input type="range" min="0" max="16.54" step="0.01" value="5.58" />
            <input type="number" step="0.01" value="5.58" />
          </div>

          <label>目标 Y</label>
          <div class="control-row" data-key="targetY">
            <input type="range" min="0" max="8.07" step="0.01" value="3.35" />
            <input type="number" step="0.01" value="3.35" />
          </div>

          <label>目标 Z</label>
          <div class="control-row" data-key="targetZ">
            <input type="range" min="0.5" max="3.0" step="0.01" value="1.23" />
            <input type="number" step="0.01" value="1.23" />
          </div>

          <button class="reset-button" id="resetTarget" type="button">恢复默认</button>
        </div>

        <div class="metrics">
          <div class="metric">
            <div class="label">距离</div>
            <div class="value" id="metricRange">0.00</div>
          </div>
          <div class="metric">
            <div class="label">飞轮</div>
            <div class="value" id="metricFlywheel">0.0</div>
          </div>
          <div class="metric">
            <div class="label">Hood</div>
            <div class="value" id="metricHood">0.0</div>
          </div>
          <div class="metric">
            <div class="label">入射角</div>
            <div class="value" id="metricEntry">0.0</div>
          </div>
          <div class="metric">
            <div class="label">命中</div>
            <div class="value" id="metricOnTarget">否</div>
          </div>
        </div>
      </aside>
    </div>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>
